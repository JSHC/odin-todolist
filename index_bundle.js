(()=>{"use strict";const e=new class{events={};publish(e,t){if(console.log(`publish called for event ${e} with data ${JSON.stringify(t)}`),this.events[e])for(let n of this.events[e])console.log(`calling ${n} for ${e}`),n(t)}subscribe(e,t){console.log(`subscribe: ${e}, ${t}`),this.events[e]||(this.events[e]=[]),this.events[e].push(t),console.log(`${t} subscribed to ${e}`)}unsubscribe(e,t){this.events[e]&&this.events[e].remove(this.events[e].find((e=>e===t)))}};class t{constructor(e,t,n,s){this.id=e,this.title=t,this.description=n,this.dueDate=s,this.isComplete=!1}}const n=[];function s(e,s,o){const c=0===(i=n).length?1:i.reduce(((e,t)=>e.id<t.value?t:e)).id+1;var i;const d=new t(c,e,s,o);return n.push(d),d}const o=new class{render(e){const t=function(e){return n.find((t=>t.id===e))}(e);if(!t)return;const s=document.createElement("div"),o=document.createElement("h2");o.textContent=t.title;const c=document.createElement("div"),i=document.createElement("div");i.textContent=t.description,c.appendChild(i);const d=document.createElement("div");d.textContent=t.dueDate,c.appendChild(d);const l=document.createElement("div");return l.textContent=t.isComplete,c.appendChild(l),s.appendChild(o),s.appendChild(c),s}},c=[new class{constructor(e,t){this.id=e,this.name=t}}(1,"Default")];function i(){return c}const d=new class{render(){const e=i(),t=document.createElement("div");t.classList.add("project-list-container");const n=document.createElement("h2");n.textContent="Projects";const s=document.createElement("ul");s.classList.add("project-list");for(let t of e){const e=document.createElement("li");e.classList.add("project-list-item");const n=document.createElement("a");n.href="#",n.textContent=t.name,n.addEventListener("click",(e=>this.onProjectLinkClick(e,t))),e.appendChild(n),s.appendChild(e)}return t.appendChild(n),t.appendChild(s),t}onProjectLinkClick(t,n){t.preventDefault(),console.log({project:n}),e.publish("changePage",{page:"ProjectDetail",data:1})}};console.log("TodoList app loaded"),s("Test","Test Description","2022-12-29"),s("Test2","Test Description 2","2022-12-30"),console.table(n);const l={TodoItemDetail:o,ProjectList:d};e.subscribe("changePage",r);const a=document.createElement("div");function r(e){console.log(e),e.page&&l[e.page]&&(a.innerHTML="",a.appendChild(l[e.page].render(e.data)))}a.classList.add("main-content"),document.body.appendChild(a),r({page:"ProjectList"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y0FBYyxNQUMvQ2lCLEVBQWdCTCxVQUFVQyxJQUFJLHFCQUU5QixNQUFNSyxFQUFjbkIsU0FBU0MsY0FBYyxLQUMzQ2tCLEVBQVlDLEtBQUssSUFDakJELEVBQVloQixZQUFjYyxFQUFRUCxLQUNsQ1MsRUFBWUUsaUJBQWlCLFNBQVVDLEdBQU1uRCxLQUFLb0QsbUJBQW1CRCxFQUFHTCxLQUV4RUMsRUFBZ0JaLFlBQVlhLEdBQzVCSCxFQUFZVixZQUFZWSxFQUM1QixDQUtBLE9BSEFOLEVBQXdCTixZQUFZUyxHQUNwQ0gsRUFBd0JOLFlBQVlVLEdBRTdCSixDQUNYLENBRUFXLG1CQUFtQkQsRUFBR0wsR0FDbEJLLEVBQUVFLGlCQUNGekQsUUFBUUMsSUFBSSxDQUFDaUQsWUFDYixVQUFlLGFBQWMsQ0FDekJRLEtBQU0sZ0JBQ04zRCxLQUFNLEdBRWQsR0NyQ0pDLFFBQVFDLElBQUksdUJBQ1ptQixFQUFZLE9BQVEsbUJBQW9CLGNBQ3hDQSxFQUFZLFFBQVMscUJBQXNCLGNBQzNDcEIsUUFBUTJELE1OTUd4QyxHTUpYLE1BQU15QyxFQUFRLENBQ1YsZUFBa0IsRUFDbEIsWUFBZSxHQUduQixZQUFpQixhQUFjQyxHQUUvQixNQUFNQyxFQUFjN0IsU0FBU0MsY0FBYyxPQUkzQyxTQUFTMkIsRUFBVzlELEdBQ2hCQyxRQUFRQyxJQUFJRixHQUNQQSxFQUFLMkQsTUFBU0UsRUFBTTdELEVBQUsyRCxRQUk5QkksRUFBWUMsVUFBWSxHQUN4QkQsRUFBWXZCLFlBQVlxQixFQUFNN0QsRUFBSzJELE1BQU03QixPQUFPOUIsRUFBS0EsT0FDekQsQ0FYQStELEVBQVloQixVQUFVQyxJQUFJLGdCQUMxQmQsU0FBUytCLEtBQUt6QixZQUFZdUIsR0FZMUJELEVBQVcsQ0FDUEgsS0FBTSxlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW0uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1RvZG9JdGVtL1RvZG9JdGVtQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvdXRpbC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW1EZXRhaWwuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1Byb2plY3QvUHJvamVjdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1Byb2plY3QvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvUHJvamVjdC9Qcm9qZWN0TGlzdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFB1YlN1YiB7XHJcbiAgICBldmVudHMgPSB7fTtcclxuXHJcbiAgICBwdWJsaXNoKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYHB1Ymxpc2ggY2FsbGVkIGZvciBldmVudCAke2V2ZW50fSB3aXRoIGRhdGEgJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKVxyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMuZXZlbnRzW2V2ZW50XSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FsbGluZyAke2xpc3RlbmVyfSBmb3IgJHtldmVudH1gKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcihkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBzdWJzY3JpYmU6ICR7ZXZlbnR9LCAke2NhbGxiYWNrfWApXHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYCR7Y2FsbGJhY2t9IHN1YnNjcmliZWQgdG8gJHtldmVudH1gKVxyXG4gICAgfVxyXG5cclxuICAgIHVuc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5yZW1vdmUoXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5maW5kKGxpc3RlbmVyID0+IGxpc3RlbmVyID09PSBjYWxsYmFjaylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUHViU3ViKCk7IiwiZXhwb3J0IGNsYXNzIFRvZG9JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gICAgICAgIHRoaXMuaXNDb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVG9kb0l0ZW0gfSBmcm9tIFwiLi9Ub2RvSXRlbVwiO1xyXG5pbXBvcnQgeyBnZXROZXh0SWQgfSBmcm9tIFwiLi4vdXRpbFwiO1xyXG5cclxuY29uc3QgdG9kb0l0ZW1zID0gW107XHJcblxyXG5mdW5jdGlvbiBhZGRUb2RvSXRlbSh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcclxuICAgIGNvbnN0IG5ld0lkID0gZ2V0TmV4dElkKHRvZG9JdGVtcyk7XHJcbiAgICBjb25zdCBuZXdUb2RvSXRlbSA9IG5ldyBUb2RvSXRlbShuZXdJZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlKTtcclxuICAgIHRvZG9JdGVtcy5wdXNoKG5ld1RvZG9JdGVtKTtcclxuICAgIHJldHVybiBuZXdUb2RvSXRlbTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9kb0l0ZW1zKCkge1xyXG4gICAgcmV0dXJuIHRvZG9JdGVtcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9kb0l0ZW1CeUlkKGlkKSB7XHJcbiAgICByZXR1cm4gdG9kb0l0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpZCk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IGFkZFRvZG9JdGVtLCBnZXRUb2RvSXRlbXMsIGdldFRvZG9JdGVtQnlJZCB9OyIsImV4cG9ydCBmdW5jdGlvbiBnZXROZXh0SWQoYXJyKSB7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiAxO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoKHByZXZpb3VzLCBpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV4dCA9IHByZXZpb3VzLmlkIDwgaXRlbS52YWx1ZSA/IGl0ZW0gOiBwcmV2aW91c1xyXG4gICAgICAgIHJldHVybiBuZXh0O1xyXG4gICAgfSkuaWQgKyAxO1xyXG59IiwiaW1wb3J0IHsgZ2V0VG9kb0l0ZW1CeUlkIH0gZnJvbSBcIi4vVG9kb0l0ZW1Db250cm9sbGVyXCI7XHJcbmNsYXNzIFRvZG9JdGVtRGV0YWlsIHtcclxuICAgIHJlbmRlcihpZCkge1xyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtID0gZ2V0VG9kb0l0ZW1CeUlkKGlkKTtcclxuICAgICAgICBpZiAoIXRvZG9JdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kb0l0ZW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICAgICAgICB0b2RvSXRlbUhlYWRlci50ZXh0Q29udGVudCA9IHRvZG9JdGVtLnRpdGxlO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgdG9kb0l0ZW1Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkZXNjcmlwdGlvbkRpdi50ZXh0Q29udGVudCA9IHRvZG9JdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRvZG9JdGVtQ29udGVudC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkRpdik7XHJcblxyXG4gICAgICAgIGNvbnN0IGR1ZURhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkdWVEYXRlRGl2LnRleHRDb250ZW50ID0gdG9kb0l0ZW0uZHVlRGF0ZTtcclxuICAgICAgICB0b2RvSXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQoZHVlRGF0ZURpdik7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQ29tcGxldGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBpc0NvbXBsZXRlRGl2LnRleHRDb250ZW50ID0gdG9kb0l0ZW0uaXNDb21wbGV0ZTtcclxuICAgICAgICB0b2RvSXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQoaXNDb21wbGV0ZURpdik7XHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgICAgICB0b2RvSXRlbURpdi5hcHBlbmRDaGlsZCh0b2RvSXRlbUhlYWRlcik7XHJcbiAgICAgICAgdG9kb0l0ZW1EaXYuYXBwZW5kQ2hpbGQodG9kb0l0ZW1Db250ZW50KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiB0b2RvSXRlbURpdjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFRvZG9JdGVtRGV0YWlsKCk7IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL1Byb2plY3RcIjtcclxuaW1wb3J0IHsgZ2V0TmV4dElkIH0gZnJvbSBcIi4uL3V0aWxcIjtcclxuXHJcbmNvbnN0IHByb2plY3RzID0gW1xyXG4gICAgbmV3IFByb2plY3QoMSwgXCJEZWZhdWx0XCIpLFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gYWRkUHJvamVjdChuYW1lKSB7XHJcbiAgICBjb25zdCBuZXdJZCA9IGdldE5leHRJZChwcm9qZWN0cyk7XHJcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QobmV3SWQsIG5hbWUpO1xyXG4gICAgcHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuICAgIHJldHVybiBuZXdQcm9qZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9qZWN0cygpIHtcclxuICAgIHJldHVybiBwcm9qZWN0cztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvamVjdEJ5SWQoaWQpIHtcclxuICAgIHJldHVybiBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gaWQpO1xyXG59XHJcblxyXG5leHBvcnQgeyBhZGRQcm9qZWN0LCBnZXRQcm9qZWN0cywgZ2V0UHJvamVjdEJ5SWQgfSIsImV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKGlkLCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXRQcm9qZWN0cyB9IGZyb20gXCIuL1Byb2plY3RDb250cm9sbGVyXCI7XHJcbmltcG9ydCBQdWJTdWIgZnJvbSBcIi4uL1B1YlN1YlwiO1xyXG5jbGFzcyBQcm9qZWN0TGlzdCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBnZXRQcm9qZWN0cygpO1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0Q29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgcHJvamVjdExpc3RDb250YWluZXJEaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1saXN0LWNvbnRhaW5lcicpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3RIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xyXG4gICAgICAgIHByb2plY3RMaXN0SGVhZGVyLnRleHRDb250ZW50ID0gXCJQcm9qZWN0c1wiO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xyXG4gICAgICAgIHByb2plY3RMaXN0LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtbGlzdCcpO1xyXG4gICAgXHJcbiAgICAgICAgZm9yIChsZXQgcHJvamVjdCBvZiBwcm9qZWN0cykge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdExpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgcHJvamVjdExpc3RJdGVtLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtbGlzdC1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0TGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgcHJvamVjdExpbmsuaHJlZj1cIiNcIjtcclxuICAgICAgICAgICAgcHJvamVjdExpbmsudGV4dENvbnRlbnQgPSBwcm9qZWN0Lm5hbWU7XHJcbiAgICAgICAgICAgIHByb2plY3RMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMub25Qcm9qZWN0TGlua0NsaWNrKGUsIHByb2plY3QpKTtcclxuICAgIFxyXG4gICAgICAgICAgICBwcm9qZWN0TGlzdEl0ZW0uYXBwZW5kQ2hpbGQocHJvamVjdExpbmspO1xyXG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5hcHBlbmRDaGlsZChwcm9qZWN0TGlzdEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm9qZWN0TGlzdENvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChwcm9qZWN0TGlzdEhlYWRlcik7XHJcbiAgICAgICAgcHJvamVjdExpc3RDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQocHJvamVjdExpc3QpO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHByb2plY3RMaXN0Q29udGFpbmVyRGl2O1xyXG4gICAgfVxyXG5cclxuICAgIG9uUHJvamVjdExpbmtDbGljayhlLCBwcm9qZWN0KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHtwcm9qZWN0fSk7XHJcbiAgICAgICAgUHViU3ViLnB1Ymxpc2goJ2NoYW5nZVBhZ2UnLCB7XHJcbiAgICAgICAgICAgIHBhZ2U6ICdQcm9qZWN0RGV0YWlsJyxcclxuICAgICAgICAgICAgZGF0YTogMSxcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUHJvamVjdExpc3QoKTsiLCJpbXBvcnQgUHViU3ViIGZyb20gJy4vbW9kdWxlcy9QdWJTdWInO1xyXG5pbXBvcnQgeyBhZGRUb2RvSXRlbSwgZ2V0VG9kb0l0ZW1CeUlkLCBnZXRUb2RvSXRlbXMgfSBmcm9tICcuL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW1Db250cm9sbGVyJztcclxuaW1wb3J0IFRvZG9JdGVtRGV0YWlsIGZyb20gJy4vbW9kdWxlcy9Ub2RvSXRlbS9Ub2RvSXRlbURldGFpbCc7XHJcbmltcG9ydCBQcm9qZWN0TGlzdCBmcm9tICcuL21vZHVsZXMvUHJvamVjdC9Qcm9qZWN0TGlzdCc7XHJcbmNvbnNvbGUubG9nKCdUb2RvTGlzdCBhcHAgbG9hZGVkJyk7XHJcbmFkZFRvZG9JdGVtKFwiVGVzdFwiLCBcIlRlc3QgRGVzY3JpcHRpb25cIiwgXCIyMDIyLTEyLTI5XCIpO1xyXG5hZGRUb2RvSXRlbShcIlRlc3QyXCIsIFwiVGVzdCBEZXNjcmlwdGlvbiAyXCIsIFwiMjAyMi0xMi0zMFwiKTtcclxuY29uc29sZS50YWJsZShnZXRUb2RvSXRlbXMoKSk7XHJcblxyXG5jb25zdCBwYWdlcyA9IHtcclxuICAgIFwiVG9kb0l0ZW1EZXRhaWxcIjogVG9kb0l0ZW1EZXRhaWwsXHJcbiAgICBcIlByb2plY3RMaXN0XCI6IFByb2plY3RMaXN0LFxyXG59XHJcblxyXG5QdWJTdWIuc3Vic2NyaWJlKCdjaGFuZ2VQYWdlJywgY2hhbmdlUGFnZSk7XHJcblxyXG5jb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5tYWluQ29udGVudC5jbGFzc0xpc3QuYWRkKCdtYWluLWNvbnRlbnQnKTtcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYWluQ29udGVudCk7XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VQYWdlKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgaWYgKCFkYXRhLnBhZ2UgfHwgIXBhZ2VzW2RhdGEucGFnZV0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbWFpbkNvbnRlbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIG1haW5Db250ZW50LmFwcGVuZENoaWxkKHBhZ2VzW2RhdGEucGFnZV0ucmVuZGVyKGRhdGEuZGF0YSkpO1xyXG59XHJcblxyXG5jaGFuZ2VQYWdlKHtcclxuICAgIHBhZ2U6IFwiUHJvamVjdExpc3RcIlxyXG59KTtcclxuLy9jaGFuZ2VQYWdlKFRvZG9JdGVtRGV0YWlsLCAxKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJldmVudHMiLCJwdWJsaXNoIiwiZXZlbnQiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGlzIiwibGlzdGVuZXIiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsInB1c2giLCJ1bnN1YnNjcmliZSIsInJlbW92ZSIsImZpbmQiLCJUb2RvSXRlbSIsImNvbnN0cnVjdG9yIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsImlzQ29tcGxldGUiLCJ0b2RvSXRlbXMiLCJhZGRUb2RvSXRlbSIsIm5ld0lkIiwiYXJyIiwibGVuZ3RoIiwicmVkdWNlIiwicHJldmlvdXMiLCJpdGVtIiwidmFsdWUiLCJuZXdUb2RvSXRlbSIsInJlbmRlciIsInRvZG9JdGVtIiwiZ2V0VG9kb0l0ZW1CeUlkIiwidG9kb0l0ZW1EaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0b2RvSXRlbUhlYWRlciIsInRleHRDb250ZW50IiwidG9kb0l0ZW1Db250ZW50IiwiZGVzY3JpcHRpb25EaXYiLCJhcHBlbmRDaGlsZCIsImR1ZURhdGVEaXYiLCJpc0NvbXBsZXRlRGl2IiwicHJvamVjdHMiLCJuYW1lIiwiZ2V0UHJvamVjdHMiLCJwcm9qZWN0TGlzdENvbnRhaW5lckRpdiIsImNsYXNzTGlzdCIsImFkZCIsInByb2plY3RMaXN0SGVhZGVyIiwicHJvamVjdExpc3QiLCJwcm9qZWN0IiwicHJvamVjdExpc3RJdGVtIiwicHJvamVjdExpbmsiLCJocmVmIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJvblByb2plY3RMaW5rQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsInBhZ2UiLCJ0YWJsZSIsInBhZ2VzIiwiY2hhbmdlUGFnZSIsIm1haW5Db250ZW50IiwiaW5uZXJIVE1MIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=