(()=>{"use strict";const e=new class{events={};publish(e,t){if(console.log(`publish called for event ${e} with data ${JSON.stringify(t)}`),this.events[e])for(let n of this.events[e])console.log(`calling ${n} for ${e}`),n(t)}subscribe(e,t){console.log(`subscribe: ${e}, ${t}`),this.events[e]||(this.events[e]=[]),this.events[e].push(t),console.log(`${t} subscribed to ${e}`)}unsubscribe(e,t){this.events[e]&&this.events[e].remove(this.events[e].find((e=>e===t)))}};class t{constructor(e,t,n,c,o){this.id=e,this.title=t,this.description=n,this.dueDate=c,this.isComplete=!1,this.projectId=o||1}}function n(t,n){e.publish("changePage",{page:t,data:n})}const c=[];function o(e,n,o){const s=0===(d=c).length?1:d.reduce(((e,t)=>e.id<t.value?t:e)).id+1;var d;const i=new t(s,e,n,o);return c.push(i),i}function s(){return c}const d=new class{render(e){const t=function(e){return c.find((t=>t.id===e))}(e);if(!t)return;const n=document.createElement("div"),o=document.createElement("h2");o.textContent=t.title;const s=document.createElement("div"),d=document.createElement("div");d.textContent=t.description,s.appendChild(d);const i=document.createElement("div");i.textContent=t.dueDate,s.appendChild(i);const a=document.createElement("div");return a.textContent=t.isComplete,s.appendChild(a),n.appendChild(o),n.appendChild(s),n}},i=[new class{constructor(e,t){this.id=e,this.name=t}}(1,"Default")];function a(){return i}function l(e){return i.find((t=>t.id===e))}const r=new class{render(){const e=a(),t=document.createElement("div");t.classList.add("project-list-container");const n=document.createElement("h2");n.textContent="Projects";const c=document.createElement("ul");c.classList.add("project-list");for(let t of e){const e=document.createElement("li");e.classList.add("project-list-item");const n=document.createElement("a");n.href="#",n.textContent=t.name,n.addEventListener("click",(e=>this.onProjectLinkClick(e,t))),e.appendChild(n),c.appendChild(e)}return t.appendChild(n),t.appendChild(c),t}onProjectLinkClick(e,t){e.preventDefault(),console.log({project:t}),n("ProjectDetail",1)}},p=new class{pageLinks=[{name:"Projects",page:"ProjectList"}];render(){const e=document.createElement("header"),t=document.createElement("nav"),n=document.createElement("ul");n.classList.add("header-links");for(let e of this.pageLinks){const t=document.createElement("li");t.classList.add("header-link-item");const c=document.createElement("a");c.href="#",c.textContent=e.name,c.addEventListener("click",(t=>this.onHeaderLinkClick(t,e))),t.appendChild(c),n.appendChild(t)}return t.appendChild(n),e.appendChild(t),e}onHeaderLinkClick(t,n){t.preventDefault(),e.publish("changePage",{page:n.page})}},u=new class{getProjectById(e){return l(e)}getTodoItemsForProject(e){return s().filter((t=>t.projectId===e))}},m=new class{render(e){const t=l(e),c=u.getTodoItemsForProject(e);console.table(c);const o=document.createElement("div");o.classList.add("project-detail");const s=document.createElement("h2");s.textContent=t.name||"Project Details",o.appendChild(s);const d=document.createElement("div");d.classList.add("todo-items-container");for(let e of c){const t=document.createElement("div");t.classList.add("todo-item");const c=document.createElement("a");c.href="#",c.addEventListener("click",(t=>{t.preventDefault(),n("TodoItemDetail",e.id)}));const o=document.createElement("h3");o.textContent=e.title,c.appendChild(o),t.appendChild(c);const s=document.createElement("div");s.textContent=`Due date: ${e.dueDate}`,t.appendChild(s),d.appendChild(t)}return o.appendChild(d),o}};console.log("TodoList app loaded"),o("Test","Test Description","2022-12-29"),o("Test2","Test Description 2","2022-12-30"),console.table(s());const h={TodoItemDetail:d,ProjectList:r,ProjectDetail:m};e.subscribe("changePage",f),document.body.appendChild(p.render());const C=document.createElement("div");function f(e){console.log(e),e.page&&h[e.page]&&(C.innerHTML="",C.appendChild(h[e.page].render(e.data)))}C.classList.add("main-content"),document.body.appendChild(C),f({page:"ProjectList"})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3RDOEQsRUFBYWxDLFlBQVlKLEdBQ3pCSCxFQUFZTyxZQUFZa0MsR0FFeEIsTUFBTUMsRUFBcUJ6QyxTQUFTQyxjQUFjLE9BQ2xEd0MsRUFBbUJ0QyxZQUFjLGFBQWFOLEVBQVNqQixVQUN2RG1CLEVBQVlPLFlBQVltQyxHQUV4QkYsRUFBbUJqQyxZQUFZUCxFQUNuQyxDQUdBLE9BREFzQyxFQUFpQi9CLFlBQVlpQyxHQUN0QkYsQ0FDWCxHQ3JDSjFFLFFBQVFDLElBQUksdUJBQ1pzQixFQUFZLE9BQVEsbUJBQW9CLGNBQ3hDQSxFQUFZLFFBQVMscUJBQXNCLGNBQzNDdkIsUUFBUXlFLE1BQU16QyxLQUVkLE1BQU0rQyxFQUFRLENBQ1YsZUFBa0IsRUFDbEIsWUFBZSxFQUNmLGNBQWdCLEdBR3BCLFlBQWlCLGFBQWNDLEdBRS9CM0MsU0FBUzRDLEtBQUt0QyxZQUFZLFlBQzFCLE1BQU11QyxFQUFjN0MsU0FBU0MsY0FBYyxPQUkzQyxTQUFTMEMsRUFBV2pGLEdBQ2hCQyxRQUFRQyxJQUFJRixHQUNQQSxFQUFLc0IsTUFBUzBELEVBQU1oRixFQUFLc0IsUUFJOUI2RCxFQUFZQyxVQUFZLEdBQ3hCRCxFQUFZdkMsWUFBWW9DLEVBQU1oRixFQUFLc0IsTUFBTVksT0FBT2xDLEVBQUtBLE9BQ3pELENBWEFtRixFQUFZOUIsVUFBVUMsSUFBSSxnQkFDMUJoQixTQUFTNEMsS0FBS3RDLFlBQVl1QyxHQVkxQkYsRUFBVyxDQUNQM0QsS0FBTSxlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW0uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL3V0aWwuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1RvZG9JdGVtL1RvZG9JdGVtQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW1EZXRhaWwuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1Byb2plY3QvUHJvamVjdENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1Byb2plY3QvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvUHJvamVjdC9Qcm9qZWN0TGlzdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvTGF5b3V0L2hlYWRlci5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL21vZHVsZXMvUHJvamVjdFRvZG9JdGVtTWVkaWF0b3IuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10b2RvbGlzdC8uL3NyYy9tb2R1bGVzL1Byb2plY3QvUHJvamVjdERldGFpbC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvZG9saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFB1YlN1YiB7XHJcbiAgICBldmVudHMgPSB7fTtcclxuXHJcbiAgICBwdWJsaXNoKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYHB1Ymxpc2ggY2FsbGVkIGZvciBldmVudCAke2V2ZW50fSB3aXRoIGRhdGEgJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKVxyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIHRoaXMuZXZlbnRzW2V2ZW50XSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FsbGluZyAke2xpc3RlbmVyfSBmb3IgJHtldmVudH1gKVxyXG4gICAgICAgICAgICBsaXN0ZW5lcihkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBzdWJzY3JpYmU6ICR7ZXZlbnR9LCAke2NhbGxiYWNrfWApXHJcbiAgICAgICAgaWYgKCF0aGlzLmV2ZW50c1tldmVudF0pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHNbZXZlbnRdID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0ucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYCR7Y2FsbGJhY2t9IHN1YnNjcmliZWQgdG8gJHtldmVudH1gKVxyXG4gICAgfVxyXG5cclxuICAgIHVuc3Vic2NyaWJlKGV2ZW50LCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5yZW1vdmUoXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5maW5kKGxpc3RlbmVyID0+IGxpc3RlbmVyID09PSBjYWxsYmFjaylcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBuZXcgUHViU3ViKCk7IiwiZXhwb3J0IGNsYXNzIFRvZG9JdGVtIHtcclxuICAgIGNvbnN0cnVjdG9yKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByb2plY3RJZCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgICAgICAgdGhpcy5pc0NvbXBsZXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSBwcm9qZWN0SWQgfHwgMTtcclxuICAgIH1cclxufSIsImltcG9ydCBQdWJTdWIgZnJvbSBcIi4vUHViU3ViXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dElkKGFycikge1xyXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcnIucmVkdWNlKChwcmV2aW91cywgaXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5leHQgPSBwcmV2aW91cy5pZCA8IGl0ZW0udmFsdWUgPyBpdGVtIDogcHJldmlvdXNcclxuICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgIH0pLmlkICsgMTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHB1Ymxpc2hMaW5rKHBhZ2UsIGRhdGEpIHtcclxuICAgIFB1YlN1Yi5wdWJsaXNoKCdjaGFuZ2VQYWdlJywge1xyXG4gICAgICAgIHBhZ2UsXHJcbiAgICAgICAgZGF0YVxyXG4gICAgfSk7XHJcbn0iLCJpbXBvcnQgeyBUb2RvSXRlbSB9IGZyb20gXCIuL1RvZG9JdGVtXCI7XHJcbmltcG9ydCB7IGdldE5leHRJZCB9IGZyb20gXCIuLi91dGlsXCI7XHJcblxyXG5jb25zdCB0b2RvSXRlbXMgPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGFkZFRvZG9JdGVtKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSkge1xyXG4gICAgY29uc3QgbmV3SWQgPSBnZXROZXh0SWQodG9kb0l0ZW1zKTtcclxuICAgIGNvbnN0IG5ld1RvZG9JdGVtID0gbmV3IFRvZG9JdGVtKG5ld0lkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpO1xyXG4gICAgdG9kb0l0ZW1zLnB1c2gobmV3VG9kb0l0ZW0pO1xyXG4gICAgcmV0dXJuIG5ld1RvZG9JdGVtO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUb2RvSXRlbXMoKSB7XHJcbiAgICByZXR1cm4gdG9kb0l0ZW1zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUb2RvSXRlbUJ5SWQoaWQpIHtcclxuICAgIHJldHVybiB0b2RvSXRlbXMuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGlkKTtcclxufVxyXG5cclxuZXhwb3J0IHsgYWRkVG9kb0l0ZW0sIGdldFRvZG9JdGVtcywgZ2V0VG9kb0l0ZW1CeUlkIH07IiwiaW1wb3J0IHsgZ2V0VG9kb0l0ZW1CeUlkIH0gZnJvbSBcIi4vVG9kb0l0ZW1Db250cm9sbGVyXCI7XHJcbmNsYXNzIFRvZG9JdGVtRGV0YWlsIHtcclxuICAgIHJlbmRlcihpZCkge1xyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtID0gZ2V0VG9kb0l0ZW1CeUlkKGlkKTtcclxuICAgICAgICBpZiAoIXRvZG9JdGVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdG9kb0l0ZW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICAgICAgICB0b2RvSXRlbUhlYWRlci50ZXh0Q29udGVudCA9IHRvZG9JdGVtLnRpdGxlO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgdG9kb0l0ZW1Db250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkZXNjcmlwdGlvbkRpdi50ZXh0Q29udGVudCA9IHRvZG9JdGVtLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgIHRvZG9JdGVtQ29udGVudC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkRpdik7XHJcblxyXG4gICAgICAgIGNvbnN0IGR1ZURhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBkdWVEYXRlRGl2LnRleHRDb250ZW50ID0gdG9kb0l0ZW0uZHVlRGF0ZTtcclxuICAgICAgICB0b2RvSXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQoZHVlRGF0ZURpdik7XHJcblxyXG4gICAgICAgIGNvbnN0IGlzQ29tcGxldGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBpc0NvbXBsZXRlRGl2LnRleHRDb250ZW50ID0gdG9kb0l0ZW0uaXNDb21wbGV0ZTtcclxuICAgICAgICB0b2RvSXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQoaXNDb21wbGV0ZURpdik7XHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgICAgICB0b2RvSXRlbURpdi5hcHBlbmRDaGlsZCh0b2RvSXRlbUhlYWRlcik7XHJcbiAgICAgICAgdG9kb0l0ZW1EaXYuYXBwZW5kQ2hpbGQodG9kb0l0ZW1Db250ZW50KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiB0b2RvSXRlbURpdjtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IFRvZG9JdGVtRGV0YWlsKCk7IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gXCIuL1Byb2plY3RcIjtcclxuaW1wb3J0IHsgZ2V0TmV4dElkIH0gZnJvbSBcIi4uL3V0aWxcIjtcclxuXHJcbmNvbnN0IHByb2plY3RzID0gW1xyXG4gICAgbmV3IFByb2plY3QoMSwgXCJEZWZhdWx0XCIpLFxyXG5dO1xyXG5cclxuZnVuY3Rpb24gYWRkUHJvamVjdChuYW1lKSB7XHJcbiAgICBjb25zdCBuZXdJZCA9IGdldE5leHRJZChwcm9qZWN0cyk7XHJcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gbmV3IFByb2plY3QobmV3SWQsIG5hbWUpO1xyXG4gICAgcHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuICAgIHJldHVybiBuZXdQcm9qZWN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9qZWN0cygpIHtcclxuICAgIHJldHVybiBwcm9qZWN0cztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvamVjdEJ5SWQoaWQpIHtcclxuICAgIHJldHVybiBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PT0gaWQpO1xyXG59XHJcblxyXG5leHBvcnQgeyBhZGRQcm9qZWN0LCBnZXRQcm9qZWN0cywgZ2V0UHJvamVjdEJ5SWQgfSIsImV4cG9ydCBjbGFzcyBQcm9qZWN0IHtcclxuICAgIGNvbnN0cnVjdG9yKGlkLCBuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBnZXRQcm9qZWN0cyB9IGZyb20gXCIuL1Byb2plY3RDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IHB1Ymxpc2hMaW5rIH0gZnJvbSBcIi4uL3V0aWxcIjtcclxuY2xhc3MgUHJvamVjdExpc3Qge1xyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gZ2V0UHJvamVjdHMoKTtcclxuICAgICAgICBjb25zdCBwcm9qZWN0TGlzdENvbnRhaW5lckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHByb2plY3RMaXN0Q29udGFpbmVyRGl2LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QtbGlzdC1jb250YWluZXInKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0SGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICAgICAgICBwcm9qZWN0TGlzdEhlYWRlci50ZXh0Q29udGVudCA9IFwiUHJvamVjdHNcIjtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgICAgICBwcm9qZWN0TGlzdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWxpc3QnKTtcclxuICAgIFxyXG4gICAgICAgIGZvciAobGV0IHByb2plY3Qgb2YgcHJvamVjdHMpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RMaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICAgICAgICAgIHByb2plY3RMaXN0SXRlbS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LWxpc3QtaXRlbScpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJvamVjdExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIHByb2plY3RMaW5rLmhyZWY9XCIjXCI7XHJcbiAgICAgICAgICAgIHByb2plY3RMaW5rLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lO1xyXG4gICAgICAgICAgICBwcm9qZWN0TGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLm9uUHJvamVjdExpbmtDbGljayhlLCBwcm9qZWN0KSk7XHJcbiAgICBcclxuICAgICAgICAgICAgcHJvamVjdExpc3RJdGVtLmFwcGVuZENoaWxkKHByb2plY3RMaW5rKTtcclxuICAgICAgICAgICAgcHJvamVjdExpc3QuYXBwZW5kQ2hpbGQocHJvamVjdExpc3RJdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvamVjdExpc3RDb250YWluZXJEaXYuYXBwZW5kQ2hpbGQocHJvamVjdExpc3RIZWFkZXIpO1xyXG4gICAgICAgIHByb2plY3RMaXN0Q29udGFpbmVyRGl2LmFwcGVuZENoaWxkKHByb2plY3RMaXN0KTtcclxuICAgIFxyXG4gICAgICAgIHJldHVybiBwcm9qZWN0TGlzdENvbnRhaW5lckRpdjtcclxuICAgIH1cclxuXHJcbiAgICBvblByb2plY3RMaW5rQ2xpY2soZSwgcHJvamVjdCkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh7cHJvamVjdH0pO1xyXG4gICAgICAgIHB1Ymxpc2hMaW5rKCdQcm9qZWN0RGV0YWlsJywgMSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBQcm9qZWN0TGlzdCgpOyIsImltcG9ydCBQdWJTdWIgZnJvbSBcIi4uL1B1YlN1YlwiO1xyXG5cclxuY2xhc3MgSGVhZGVyIHtcclxuICAgIHBhZ2VMaW5rcyA9IFtcclxuICAgICAgICB7bmFtZTogJ1Byb2plY3RzJyxwYWdlOiAnUHJvamVjdExpc3QnfVxyXG4gICAgXVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpO1xyXG4gICAgICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ25hdicpO1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcclxuICAgICAgICBsaW5rcy5jbGFzc0xpc3QuYWRkKCdoZWFkZXItbGlua3MnKTtcclxuICAgICAgICBmb3IgKGxldCBwYWdlIG9mIHRoaXMucGFnZUxpbmtzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgICAgICAgICAgbGlzdEl0ZW0uY2xhc3NMaXN0LmFkZCgnaGVhZGVyLWxpbmstaXRlbScpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW1MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgICBsaXN0SXRlbUxpbmsuaHJlZiA9ICcjJztcclxuICAgICAgICAgICAgbGlzdEl0ZW1MaW5rLnRleHRDb250ZW50ID0gcGFnZS5uYW1lO1xyXG4gICAgICAgICAgICBsaXN0SXRlbUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5vbkhlYWRlckxpbmtDbGljayhlLCBwYWdlKSk7XHJcbiAgICAgICAgICAgIGxpc3RJdGVtLmFwcGVuZENoaWxkKGxpc3RJdGVtTGluayk7XHJcblxyXG4gICAgICAgICAgICBsaW5rcy5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5hdi5hcHBlbmRDaGlsZChsaW5rcyk7XHJcblxyXG4gICAgICAgIGhlYWRlci5hcHBlbmRDaGlsZChuYXYpO1xyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgb25IZWFkZXJMaW5rQ2xpY2soZSwgbmV3UGFnZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBQdWJTdWIucHVibGlzaCgnY2hhbmdlUGFnZScsIHtwYWdlOiBuZXdQYWdlLnBhZ2V9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgbmV3IEhlYWRlcigpOyIsImltcG9ydCB7IGdldFRvZG9JdGVtcyB9IGZyb20gXCIuL1RvZG9JdGVtL1RvZG9JdGVtQ29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBnZXRQcm9qZWN0QnlJZCB9IGZyb20gXCIuL1Byb2plY3QvUHJvamVjdENvbnRyb2xsZXJcIjtcclxuXHJcblxyXG5jbGFzcyBQcm9qZWN0VG9kb0l0ZW1NZWRpYXRvciB7XHJcbiAgICBnZXRQcm9qZWN0QnlJZChpZCkge1xyXG4gICAgICAgIHJldHVybiBnZXRQcm9qZWN0QnlJZChpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VG9kb0l0ZW1zRm9yUHJvamVjdChwcm9qZWN0SWQpIHtcclxuICAgICAgICByZXR1cm4gZ2V0VG9kb0l0ZW1zKCkuZmlsdGVyKGl0ZW0gPT4gaXRlbS5wcm9qZWN0SWQgPT09IHByb2plY3RJZCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBQcm9qZWN0VG9kb0l0ZW1NZWRpYXRvcigpO1xyXG5cclxuIiwiaW1wb3J0IFByb2plY3RUb2RvSXRlbU1lZGlhdG9yIGZyb20gXCIuLi9Qcm9qZWN0VG9kb0l0ZW1NZWRpYXRvclwiO1xyXG5pbXBvcnQgeyBwdWJsaXNoTGluayB9IGZyb20gXCIuLi91dGlsXCI7XHJcbmltcG9ydCB7IGdldFByb2plY3RCeUlkIH0gZnJvbSBcIi4vUHJvamVjdENvbnRyb2xsZXJcIjtcclxuXHJcbmNsYXNzIFByb2plY3REZXRhaWwge1xyXG4gICAgcmVuZGVyKGlkKSB7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGdldFByb2plY3RCeUlkKGlkKTtcclxuICAgICAgICBjb25zdCB0b2RvSXRlbXMgPSBQcm9qZWN0VG9kb0l0ZW1NZWRpYXRvci5nZXRUb2RvSXRlbXNGb3JQcm9qZWN0KGlkKTtcclxuICAgICAgICBjb25zb2xlLnRhYmxlKHRvZG9JdGVtcyk7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdERldGFpbERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHByb2plY3REZXRhaWxEaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdC1kZXRhaWwnKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9qZWN0RGV0YWlsSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcclxuICAgICAgICBwcm9qZWN0RGV0YWlsSGVhZGVyLnRleHRDb250ZW50ID0gcHJvamVjdC5uYW1lIHx8ICdQcm9qZWN0IERldGFpbHMnO1xyXG4gICAgICAgIHByb2plY3REZXRhaWxEaXYuYXBwZW5kQ2hpbGQocHJvamVjdERldGFpbEhlYWRlcik7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvZG9JdGVtc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd0b2RvLWl0ZW1zLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCB0b2RvSXRlbSBvZiB0b2RvSXRlbXMpIHtcclxuICAgICAgICAgICAgY29uc3QgdG9kb0l0ZW1EaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdG9kb0l0ZW1EaXYuY2xhc3NMaXN0LmFkZCgndG9kby1pdGVtJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b2RvSXRlbUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIHRvZG9JdGVtTGluay5ocmVmID0gJyMnO1xyXG4gICAgICAgICAgICB0b2RvSXRlbUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcHVibGlzaExpbmsoJ1RvZG9JdGVtRGV0YWlsJywgdG9kb0l0ZW0uaWQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBjb25zdCB0b2RvSXRlbUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcbiAgICAgICAgICAgIHRvZG9JdGVtSGVhZGVyLnRleHRDb250ZW50ID0gdG9kb0l0ZW0udGl0bGU7XHJcbiAgICAgICAgICAgIHRvZG9JdGVtTGluay5hcHBlbmRDaGlsZCh0b2RvSXRlbUhlYWRlcik7XHJcbiAgICAgICAgICAgIHRvZG9JdGVtRGl2LmFwcGVuZENoaWxkKHRvZG9JdGVtTGluayk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0b2RvSXRlbUR1ZURhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgdG9kb0l0ZW1EdWVEYXRlRGl2LnRleHRDb250ZW50ID0gYER1ZSBkYXRlOiAke3RvZG9JdGVtLmR1ZURhdGV9YDtcclxuICAgICAgICAgICAgdG9kb0l0ZW1EaXYuYXBwZW5kQ2hpbGQodG9kb0l0ZW1EdWVEYXRlRGl2KTtcclxuXHJcbiAgICAgICAgICAgIHRvZG9JdGVtc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2RvSXRlbURpdik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm9qZWN0RGV0YWlsRGl2LmFwcGVuZENoaWxkKHRvZG9JdGVtc0NvbnRhaW5lcik7XHJcbiAgICAgICAgcmV0dXJuIHByb2plY3REZXRhaWxEaXY7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBQcm9qZWN0RGV0YWlsKCk7IiwiaW1wb3J0IFB1YlN1YiBmcm9tICcuL21vZHVsZXMvUHViU3ViJztcclxuaW1wb3J0IHsgYWRkVG9kb0l0ZW0sIGdldFRvZG9JdGVtQnlJZCwgZ2V0VG9kb0l0ZW1zIH0gZnJvbSAnLi9tb2R1bGVzL1RvZG9JdGVtL1RvZG9JdGVtQ29udHJvbGxlcic7XHJcbmltcG9ydCBUb2RvSXRlbURldGFpbCBmcm9tICcuL21vZHVsZXMvVG9kb0l0ZW0vVG9kb0l0ZW1EZXRhaWwnO1xyXG5pbXBvcnQgUHJvamVjdExpc3QgZnJvbSAnLi9tb2R1bGVzL1Byb2plY3QvUHJvamVjdExpc3QnO1xyXG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vbW9kdWxlcy9MYXlvdXQvaGVhZGVyJztcclxuaW1wb3J0IFByb2plY3REZXRhaWwgZnJvbSAnLi9tb2R1bGVzL1Byb2plY3QvUHJvamVjdERldGFpbCc7XHJcbmNvbnNvbGUubG9nKCdUb2RvTGlzdCBhcHAgbG9hZGVkJyk7XHJcbmFkZFRvZG9JdGVtKFwiVGVzdFwiLCBcIlRlc3QgRGVzY3JpcHRpb25cIiwgXCIyMDIyLTEyLTI5XCIpO1xyXG5hZGRUb2RvSXRlbShcIlRlc3QyXCIsIFwiVGVzdCBEZXNjcmlwdGlvbiAyXCIsIFwiMjAyMi0xMi0zMFwiKTtcclxuY29uc29sZS50YWJsZShnZXRUb2RvSXRlbXMoKSk7XHJcblxyXG5jb25zdCBwYWdlcyA9IHtcclxuICAgIFwiVG9kb0l0ZW1EZXRhaWxcIjogVG9kb0l0ZW1EZXRhaWwsXHJcbiAgICBcIlByb2plY3RMaXN0XCI6IFByb2plY3RMaXN0LFxyXG4gICAgXCJQcm9qZWN0RGV0YWlsXCI6UHJvamVjdERldGFpbCxcclxufVxyXG5cclxuUHViU3ViLnN1YnNjcmliZSgnY2hhbmdlUGFnZScsIGNoYW5nZVBhZ2UpO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChIZWFkZXIucmVuZGVyKCkpO1xyXG5jb25zdCBtYWluQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5tYWluQ29udGVudC5jbGFzc0xpc3QuYWRkKCdtYWluLWNvbnRlbnQnKTtcclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYWluQ29udGVudCk7XHJcblxyXG5mdW5jdGlvbiBjaGFuZ2VQYWdlKGRhdGEpIHtcclxuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgaWYgKCFkYXRhLnBhZ2UgfHwgIXBhZ2VzW2RhdGEucGFnZV0pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbWFpbkNvbnRlbnQuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIG1haW5Db250ZW50LmFwcGVuZENoaWxkKHBhZ2VzW2RhdGEucGFnZV0ucmVuZGVyKGRhdGEuZGF0YSkpO1xyXG59XHJcblxyXG5jaGFuZ2VQYWdlKHtcclxuICAgIHBhZ2U6IFwiUHJvamVjdExpc3RcIlxyXG59KTtcclxuLy9jaGFuZ2VQYWdlKFRvZG9JdGVtRGV0YWlsLCAxKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJldmVudHMiLCJwdWJsaXNoIiwiZXZlbnQiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0aGlzIiwibGlzdGVuZXIiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsInB1c2giLCJ1bnN1YnNjcmliZSIsInJlbW92ZSIsImZpbmQiLCJUb2RvSXRlbSIsImNvbnN0cnVjdG9yIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByb2plY3RJZCIsImlzQ29tcGxldGUiLCJwdWJsaXNoTGluayIsInBhZ2UiLCJ0b2RvSXRlbXMiLCJhZGRUb2RvSXRlbSIsIm5ld0lkIiwiYXJyIiwibGVuZ3RoIiwicmVkdWNlIiwicHJldmlvdXMiLCJpdGVtIiwidmFsdWUiLCJuZXdUb2RvSXRlbSIsImdldFRvZG9JdGVtcyIsInJlbmRlciIsInRvZG9JdGVtIiwiZ2V0VG9kb0l0ZW1CeUlkIiwidG9kb0l0ZW1EaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0b2RvSXRlbUhlYWRlciIsInRleHRDb250ZW50IiwidG9kb0l0ZW1Db250ZW50IiwiZGVzY3JpcHRpb25EaXYiLCJhcHBlbmRDaGlsZCIsImR1ZURhdGVEaXYiLCJpc0NvbXBsZXRlRGl2IiwicHJvamVjdHMiLCJuYW1lIiwiZ2V0UHJvamVjdHMiLCJnZXRQcm9qZWN0QnlJZCIsInByb2plY3QiLCJwcm9qZWN0TGlzdENvbnRhaW5lckRpdiIsImNsYXNzTGlzdCIsImFkZCIsInByb2plY3RMaXN0SGVhZGVyIiwicHJvamVjdExpc3QiLCJwcm9qZWN0TGlzdEl0ZW0iLCJwcm9qZWN0TGluayIsImhyZWYiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm9uUHJvamVjdExpbmtDbGljayIsInByZXZlbnREZWZhdWx0IiwicGFnZUxpbmtzIiwiaGVhZGVyIiwibmF2IiwibGlua3MiLCJsaXN0SXRlbSIsImxpc3RJdGVtTGluayIsIm9uSGVhZGVyTGlua0NsaWNrIiwibmV3UGFnZSIsImdldFRvZG9JdGVtc0ZvclByb2plY3QiLCJmaWx0ZXIiLCJ0YWJsZSIsInByb2plY3REZXRhaWxEaXYiLCJwcm9qZWN0RGV0YWlsSGVhZGVyIiwidG9kb0l0ZW1zQ29udGFpbmVyIiwidG9kb0l0ZW1MaW5rIiwidG9kb0l0ZW1EdWVEYXRlRGl2IiwicGFnZXMiLCJjaGFuZ2VQYWdlIiwiYm9keSIsIm1haW5Db250ZW50IiwiaW5uZXJIVE1MIl0sInNvdXJjZVJvb3QiOiIifQ==